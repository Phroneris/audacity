
■ 半角・全角間のスペース挿入則

・特定の記号や約物を除き、全角と半角の間には半角スペースを入れる。
・丸括弧は半角とし、閉じ丸括弧と開き丸括弧の間には半角スペースを入れる。
・アクセスキーは末尾に置くが、"..." や ":" がある場合はその直前に置く。
・アクセスキーの開き丸括弧の前には半角スペースを入れないが、前が閉じ丸括弧の場合は入れる。
・数値と単位の間には基本的に半角スペースを入れるが、bitに限っては入れない。

例
・WAV として書き出し(&W)
・ズームして、修復対象領域を 1 秒よりもずっと短く選択してください。
・詳細情報は、[ヘルプ] > [診断] > [ログの表示] をご覧ください。
・WAV、AIFF、その他の非圧縮形式
・%.4f 秒 (%d Hz) (%s) = %f
・環境設定(&F)...
・振幅 (0～1) (&A):
・32bit 浮動小数点数


■ 外来語尾の長音符号

基本的にMicrosoftランゲージポータルの用語検索結果に準拠→ https://www.microsoft.com/ja-jp/language

伸ばさない：
・アクセシビリティ
・コミュニティ
・コンパイラ
・ディレクトリ
・ベロシティ
・ライブラリ

伸ばす：
・エンコーダー/デコーダー
・シンセサイザー
・バッファー
・パラメーター
・フィルター
・フォルダー
・ヘッダー
・ポインター
・ミキサー
・レイヤー


■ 助数詞（1つ、1個、など）

「つ」は使わない。
スペースを入れて「1 つ」とした時、単に読みづらいだけでなく、スクリーンリーダーが「イチ つ」と読む弊害もあるため。
「個」ですらちょっと表しづらいような名詞（特に横文字やソフトウェア的な概念）に対してつい使いがちだが、
そういうのはよく見ると "a"、"one"、"single" 辺りを直訳したいだけという場合が多く、
大抵は2とか3とか10とかへの拡張性を要するものでもないので、多少頑張れば別の表現で十分に代用できる。

個別の指定
・トラック   : 「本」
・チャンネル : 「本」


■ 用語

Transifexの用語集に用語表現をある程度まとめてある→ https://www.transifex.com/klyok/audacity/glossary/ja/
以下、特に重大な気がするものを抜粋。

・"all"           : ◎「すべて」            ×「全て」「総て」
・"audio"         : ◎「音声」              ×「オーディオ」
・"interface"     : ◎「インターフェイス」  ×「インターフェース」
・"load"          : ◎「読み込み」          ×「ロード」
・"preference"    : ◎「環境設定」          ×「設定」
・"transport"     : ◎「録音と再生」        ×「トランスポート」
・"volume"        : ◎「音量」              ×「ボリューム」
・"import/export" : ◎「取り込み/書き出し」 ×「インポート/エクスポート」
・"input/output"  : ◎「入力/出力」         ×「インプット/アウトプット」
・"undo/redo"     : ◎「元に戻す/やり直し」 ×「アンドゥ/リドゥ」

以下は場合によるもの。

・"rate" : "sample rate" やその文脈なら「サンプリング周波数」（「サンプリングレート」ではない）。
           "bit rate" とかなら「レート」。
・"size" : "buffer size" など抽象的な数量概念の場合は「サイズ」。
           "track size" など視覚的大きさの場合は「大きさ」。



====================


■ 問題

src/FileException.cpp の
"Audacity failed to open a file in %s."
"Audacity failed to read from a file in %s."
の "in %s" がよくわからない。

操作履歴機能に関連して存在するらしい "Compact" 機能が、実際のUI上に見当たらない。

#: src/PluginManager.cpp
msgctxt "plug-ins"
msgid "Enable this plug-in?\n"
msgid_plural "Enable these plug-ins?\n"
は「この」と「これらの」を使い分けたいが、日本語で個別に複数形を有効化する方法がわからない。

スクリプト用機能のスクリーンショットの "Bring To Top" がよくわからない。
マクロでパスとその設定だけ変えて、キャプチャ対象を「環境設定」にして何枚も撮られてるうちに
別ソフトを同じモニターでアクティブにして（＝前面に表示して）やったら結果が変わるかと期待したが、
撮られる画像はどちらも前面に別ソフトが映り込んでいて何も変わらなかった。

ノイズ生成の種類選択で、ホワイトノイズの"White"が他と共用されてるせいで「白」になっちゃう。
Notepad++直書きで無理やり分離したエントリーを作っても、原文が重複してるのでエラーになる。
→分離して追加された…が、翻訳しても本体に反映されない。

エフェクトの "Filter Curve" が無い。

解析の "Measure RMS" が無い。

#: src/effects/Silence.h src/menus/EditMenus.cpp
msgid "Silence"
が「編集」メニューにおいて、無音化を元に戻すという意味で「無音(S) を元に戻す」と表示されるので変。
無音化のアクセスキーはOだし…。
→分離して追加された…が、今度は「Silence を元に戻す」になっちゃった。
  しかも、ジェネレーターのSilenceの翻訳が効かない。

名詞的用法と動詞的用法の両方に割り当てられている現在分詞がある。
"Playing"   … 名詞例：ステータスバーの "%s Paused."
               動詞例：ステータスバーの "%s."、マクロで再生した時の進捗ダイアログ
"Recording" … 名詞例：ステータスバーの "%s Paused."、環境設定の項目名
               動詞例：ステータスバーの "%s."、マクロで録音した時の進捗ダイアログ
"Scrubbing" … 名詞例：スクラブツールバーの持ち手のツールチップ
               動詞例：ステータスバーの "%s."

#: src/widgets/NumericTextCtrl.cpp
msgid "010,01000>0100 Hz"
は4桁Hzまでしか扱えないので不足だと思う。

#. i18n-hint: day of month, month, year, hour, minute, second
#: src/effects/Contrast.cpp
#, c-format
msgid "%d %s %02d %02dh %02dm %02ds"
の2番目の "%s" は、Audacityの言語設定が日本語だと「4月」、英語だと「April」のようになるが、
どこから取得しているのかがよくわからない。
Audacityのja.poにもwxWidgetsのそれにも無かった。

#: src/CrashReport.cpp
msgid "Report generated to:"
は過去形なのか受動態なのか。
別の言い方をすれば、"was generated" なのか "will be generated" なのか。

音声書き出しフォーマットの一部オプションのドロップダウンリストが、翻訳しても反映されない。
「WAV (Microsoft)」 … 「エンコーディング」
「その他の非圧縮ファイル」 … 「ヘッダー」、「エンコーディング」



■ これ何？

#: src/AboutDialog.cpp
msgid "<h3>"

#: src/Languages.cpp
msgid "Simplified"

#: src/effects/EffectUI.cpp
msgid "Some Command"

#: src/import/Import.cpp src/menus/ClipMenus.cpp
#, c-format
msgid "%s, %s"

#: src/menus/PluginMenus.cpp
msgid "Unknown"

#: src/menus/PluginMenus.cpp
#, c-format
msgid "Plug-in %d to %d"

#: src/prefs/ImportExportPrefs.h
msgid "IMPORT EXPORT"
msgstr ""


■ Nyquistの問題

サンプルデータの書き出しをHTMLでやった際、ページ上部に出るもののうちファイル名と任意テキストの次に置かれる、
「2 チャンネル (ステレオ).」のピリオドと、その行のノーブレークスペース等のスペーシングが変えられない。

等間隔ラベルの完了時のメッセージが化けるのでひとまず翻訳解除。



□ 問題（済）

言語設定の選択肢"System"が無い。
→追加された。

環境設定でFFmpegライブラリ導入済みの状態から更に指定を行おうとした場合に出るダイアログの、タイトル文字列"Success"が無い。
→追加された。

存在しないファイルを [開く] しようとした時のアラートのタイトル"Error Opening File"が無い。
→追加された。

"ExportMP3_56k_before/after"コマンドで頭に"MasterBefore/After_"がついたファイルが書き出されるとかいうの、
なんもつかないんですが…。
→コマンド自体が削除された。

音声ファイル取り込み時の選択肢
"Make a &copy of the files before editing (safer)"/「編集前にファイルのコピーを作成する (安全) (&C)」
を選ぶためにAlt+Cを押すと、"&Cancel"が優先されて何もせず閉じてしまう。
→v3.0.0（あるいはそれ以前？）では必ず直接取り込むようになったので、このダイアログ自体消滅した。

音声ファイル取り込み時の各オプションや、録音設定の"Custom Track &Name"/「カスタムトラック名(&N)」などなど、
一部の表示においてアクセスキーがなぜか隠れてしまう（キーを押せば効く）。自動改行でもされてるのか？
→フォーラムとメーリスで報告したところ、確認できる範囲では修正された。
  https://forum.audacityteam.org/viewtopic.php?f=68&t=102493
  https://bugzilla.audacityteam.org/show_bug.cgi?id=2043

リズムトラックの生成のソーステキストに"Used if 'Number ～"が無い。
ただしpotファイルを見たらあったので、更新で追加されたのを私が適用してないだけっぽい。うっかり。
→直しました。（喜）
何なら他の変なとこもそれで直るかもしれない。
→直りませんでした。（泣）

dummyString～系の読み上げ用のやつは、日本語の語順の関係でそう簡単には訳せない。
→%1$などの順番指定で解決できる。まあどのみち意味がよくわかんないんだけど。
→→頑張って読み上げさせて解析してなんとかした。
    ただし、Win7には日本語読み上げがないので成果確認はできない。

#: src/widgets/Ruler.cpp
msgid "Record/Play head"
て何。
→ピン留めした場合のツールチップでした。

#: src/prefs/KeyConfigPrefs.cpp
msgid ""
"\n"
"\n"
"\t and\n"
"\n"
"\t"
て何。
→コードから推測する限り、ショートカット変更時の重複警告において、重複元コマンドが複数ある場合の結合文字列。
  元が複数あることなんてある？？って感じだが、念には念を入れてるのだろう。多分。

#: src/Dependencies.cpp
#, c-format
msgid "\"%s\", \"%s\", \"%s\"\n"
て何。
→Transifexで聞いたら、もう使われなくなった要らない子なので無視で良いとJames氏が答えてくれた。

src/AudioIOBase.cpp
src/DBConnection.cpp
の各種メッセージがどうすれば出せるのかよくわからず、確認できない。
→前者は、診断からデバイス情報をテキストに保存した時に出力される文字列だった。
  後者は直接確認できていないが、コードから推測してどうにかした。



□ Nyquistの問題（済）

#: plug-ins/StudioFadeOut.ny
#, lisp-format
msgid "Selection too short.~%It must be more than 2 samples."
とあるが、サンプリング周波数        <s>8000Hzでは12サンプル選択してやっとこれが出なくなった。</s>
22050Hzではサンプル1個までがこのエラー、2個からは正常になった。
96000Hzではサンプル5個までがこのエラー、7個からは正常、6個のみエラーは出ないが処理後に7になった。
→トラックとプロジェクトのサンプリング周波数を混同してた。

#: plug-ins/adjustable-fade.ny
#, lisp-format
msgid "~aPercentage values cannot be more than 1000 %."
とあるが、別にエラーも出ず1000%以上にできる。
→修正された。

#: plug-ins/delay.ny
#, lisp-format
msgid "Number of echoes '~a' outside valid range 1 to 50.~%~a"
という感じのがこれ含め4つあるが、いずれもここにあるエラー文ではなくもっと簡素なアラートが出る。
→削除された。

#: plug-ins/highpass.ny plug-ins/lowpass.ny
#, lisp-format
msgid ""
"Error:~%~%Frequency (~a Hz) is too high for track sample rate.~%~%~\n"
"                   Track sample rate is ~a Hz~%~\n"
"                   Frequency must be less than ~a Hz."
が、訳しても効かない。
#: plug-ins/sample-data-export.ny
#, lisp-format
msgid ""
"~a~%Sample Rate: ~a Hz. Sample values on ~a scale. ~a.~%~aLength processed: ~a ~\n"
"                  samples, ~a seconds.~%Peak amplitude: ~a (linear) ~a dB.  Unweighted RMS: ~a dB.~%~\n"
"                  DC offset: ~a~a"
などのヘッダー兼ダイアログが訳しても効かない。原文との不整合はない。謎。
HTML出力では効いてる。
#: plug-ins/sample-data-import.ny
#, lisp-format
msgid ""
"Error~%~\n"
"                        '~a' could not be opened.~%~\n"
"                        Check that file exists."
などのダイアログが訳しても効かない。
#: plug-ins/vocalrediso.ny
msgid ""
" - The two channels are identical, i.e. dual mono.\n"
"   The center can't be removed.\n"
"      Any remaining difference may be caused by lossy encoding."
などの全ての解析ダイアログ（ただし"A fairly good value"以外）が効かない。
A fairly～は1行なので、改行が悪さをしてるんじゃないか感がある。
→複数行系は少なくとも認知され、原文の頭の空白を消すとひとまず効くことが確認された。
  たぶん追って抜本的修正がされる。
→→修正された。

#: plug-ins/adjustable-fade.ny
#, lisp-format
msgid ""
"~adB values cannot be more than +100 dB.~%~%~\n"
"                                 Hint: 6 dB doubles the amplitude~%~\n"
"                                 t-6 dB halves the amplitude."
とあるが、100dB超えにすると空のエラーが出てこれが表示されない。
あと3行目頭のtは恐らく~tの間違いか。nyファイルの方では\tとなってるが…。
→タブ文字についても上記同様、追って修正される。
→→修正された。

Regular Interval Labelsが、音声を選択して適当にパラメータ入れて実行しても
"Nyquist returned the value: 2"と出るだけでよくわからない。
デバッグするとそれに加えて"error: bad argument type - NIL"云々というのが出るので正しい動作ではなさそう。
→ひとまず解決された。

サンプルデータの書き出しと等間隔ラベルが、翻訳して実行すると、
大量の"wxUniChar::FromHi8bit(): invalid multibyte character"エラーを吐く。
→修正された。

サンプルデータの読み込みはファイル内に純ASCII文字しか許さないので、ファイルに出力される文字列は翻訳注意。
→エラー文への訳註で対応した。改行込みダイアログの件が修正されたおかげでそうできるようになった。

Nyquist Plug-in Installerで、改行に "~%" ではなく "\n" が使われているものがある。
→Transifexで聞いたら、PR #790 にて対応してくれた。



====================


■ ソースの文字列関数の役割（src/Internat.h）

□ 翻訳用ではないもの
  wxT() : wxWidgets本来のUnicode対応文字列関数。
          Audacityでは、これをなるべく避けて _TS() で置き換えていこうとしているんだと思う。
  _TS() : その場の代入（"substitution"）専用の文字列であることを示す。つまり翻訳用ではない。
          でも、全然使われてなくない…？

□ 翻訳用のもの
  _()   : wxWidgets本来のローカライズ対応文字列関数。
          Audacityでは、これをなるべく避けて XO() とかで置き換えていこうとしているんだと思う。
  XO()  : 翻訳のための抽出（"extraction"）専用の文字列であることを示す。…で合ってる？
          アクセスキーの "&" が含まれることは絶対に無いらしい。
  XXO() : ほぼ XO() と同一だが、アクセスキーの "&" が許容される。
          メニュー用ということだろう。
  XP()  : 複数形対応。上記全ての関数の引数が1つだけなのに対し、こいつの引数は (sing, plur, n) の3つ。
          メニューの文字列が複数形に揺らぐことは普通無いと思うので、XXO() ではなく XO() の派生だろう。

□ 文脈対応
  XC(), XXC(), XPC() :
    XO()、XXO()、XP() に、同じ文字列を別の文脈で使い分ける機能を足したもの。
    それぞれ末尾に引数が1つ増えており、ここで文脈を指定する。



■ Lispフォーマット

  (format 出力先 フォーマット arg0 ... argN )
                      ↓
    ~ [[ param1 ] , ][[ param2 ] , ] ... [ paramN ][ : ][ @ ] 指定文字
  
    パラメータになり得るのは
    ・整数
    ・'      : 文字をパラメータに
    ・V又はv : 引数を消費してそれをパラメータに
    ・#      : 引数の残り数をパラメータに

□ 単純出力 : ~N%とか書くとNの数だけ連続出力。
  ~% : 改行。
  ~& : カーソル位置が行頭でない場合に改行。
  ~| : 改ページ。
  ~~ : チルダ自体。

□ 引数1個消費出力
  ~a : Aesthetic "美的" 出力。
       引数をprinc出力（エスケープやクォートのない出力）。
       パラメータ mincol, colinc, minpad, padchar は、指定個数の文字列を前後に挿入する類のやつ。
  ~s : Standard "標準" 出力。
       引数をprin1出力（普通の、Lisp用出力）。パラメータは~aと同じ。
  ~w : Write。なんかとにかく出力。
  ~c : 文字。
  ~d : 整数。
       パラメータ mincol, padchar, commachar, comma-interval は、符号と桁埋めと桁区切り。
  ~b : バイナリ。         パラメータは~dと同じ。
  ~o : 8進数。            パラメータ同じ。
  ~x : 16進数。           パラメータ同じ。
  ~r : Radix "基数" 進数。パラメータは似たり寄ったり。
  ~f : 浮動小数点数。
       パラメータ w, d, k, overflowchar, padchar は、符号と桁埋めと指数と桁合わせ。
  ~e : Exponential "指数" 浮動小数点数。e+1とか書くやつ。   パラメータは~fと似たり寄ったり。
  ~g : General "一般" 浮動小数点数。引数の絶対値で~eか~fに。パラメータは似たり寄ったり。
  ~$ : Monetary "通貨" 浮動小数点数。                       パラメータは似たり寄ったり。

□ レイアウト調整
  ~t        : タブ。パラメータ colnum, colinc は、位置（数）と相対化。
  ~< ... ~> : Justification "寄せ"。中に書いたフォーマットを左寄せや右寄せにする。
  ~(改行) :
       直後の改行を含め、次にまともな文字が現れるまでの空白文字を全て無視する。
       ":" で修飾すると直後の改行だけを無視、"@" だと直後の改行だけを保持。

□ 制御
  ~*, ~[ ... ~], ~{ ... ~}, ~?, ~( ... ~), ~p, ~^

出典: http://super.para.media.kyoto-u.ac.jp/~tasuku/format-func.html



■ 改行コード

\.git\config ファイルの autoCRLF = input により、
リモートの改行コードはLFのままローカルに持ってきて、ローカルの改行コードは何であろうとLFに変換してリモートに渡すよう設定した。

なお、一時間違ってfalseにしてしまったのでリモートがCRに感染した恐れがあり、ついでなのでローカル/リモート共に徹底LF化しようとしたが、
改行コードの変更は差分に見なされないせいでえらい苦労した。
全てが済んだ後にうろ覚えで手順を記録しておく。記録が正しい保証も、この操作が適切な保証もないけど。

 1. ローカルjaにチェックアウト。
 2. ja系ファイル（jaの必要ファイル）をどこかに移動し、他ファイル（ignoreされないもの）を全部削除してコミット＆プッシュ。
    これでjaはローカルもリモートも真っ白に。
 3. ja系ファイルをNotepad++で手動LF化。
 4. ローカルmasterとリモートmasterを削除。
    なお、リモートはGitHubの設定でリモートのデフォルトブランチをmaster以外にしてからじゃないと無理。
 5. upstreamのmasterをローカルの新規masterブランチとして作成＆originにプッシュ（リモートmasterのLF化）。
    ついでにまたGitHub側でリモートのデフォルトブランチをmasterに戻しておく。
 6. jaにチェックアウトしてmasterをマージし、避難していたja系ファイルを上書き追加してコミット＆プッシュ。
    これでローカル/リモート共に全部LFになるが、この時のコミットメッセージを仮に「復帰」と書いたとすると、
    GitHubのblobで見た時に全ての行のコミットメッセージが「復帰」になってしまう。
 7. jaを真っ白化直前のコミットでチェックアウト（変更も破棄）し、すぐに新しいブランチja-jpを作成。
 8. 避難していたja系ファイルを上書き追加してja-jpをコミット＆プッシュ。
    …つまり6の上書き追加は要らんかったのだが、コミットメッセージ事故の説明のために記述しておく（っていうか実際やったし）。
 9. ローカルとリモートのjaブランチを削除。
10. ローカルとリモートのja-jpブランチをjaに改名。

完全自前リポジトリじゃなくて、信頼できる他所からフォークしたリポジトリだからこそできる荒業！
しかしこの方法は本当に適切なんだろうか。7辺りがすごく怪しい。ローカルはLFのままだけど、リモートは果たして…？
っていうかこの前後で git grep --cached -I $'\r' の結果に変化がないので（どちらも問題ない結果）、そもそもやる必要なかったまである。
っていうか試しにLFを1つだけCRにしてみたら差分として検出されたんですが…………？
まあいいや。



■ 「等間隔ラベル」の「Adjust ～」機能を理解するために2018/10/26/04:00時点のWiki説明文を翻訳
   （なお、理解できなかった）

この制御項目のデフォルト設定は「いいえ」。
  この設定はラベル生成基準が「数のみ」の場合にしか適用されない。（訳註：え、下に「数と間隔」の場合が説明されてるけど？）

この制御項目のドロップダウンメニューで「はい」を選ぶと、必要に応じてユーザーの選択した【ラベル間隔】を調整する。調整は全ての【区画】が同じ長さになるように行われ、それは最後のラベルから選択範囲の終端までの区画も含む。

・ただのラベル:
  （ラベル領域の長さ = 0）
  『区画』は、あるラベルとその次のラベルの（または最後のラベルと選択範囲終端の）時間間隔として定義される。別の表現をすれば、区画はラベル間隔に等しくなる。
・領域ラベル:
  （ラベル領域の長さ > 0）
  『区画』は、ラベルの始端から終端までの時間として定義される。別の表現をすれば、区画はラベル領域に等しくなる。

「いいえ」に設定すると、ラベル間隔は【ラベルの間隔】で指定する長さと完全に等しくなる。ただし、最後のラベルから選択範囲の終端までの区画はそうでない場合がある（選択長さが間隔長さでちょうど割り切れるかどうかによる）。

ラベル生成基準で「数と間隔」を選択している場合、ラベル間隔は常に【ラベルの間隔】で指定した長さになる。
ラベル生成基準で「数のみ」を選択している場合、ラベルは常に選択範囲を等しく満たすように配置される。
・ただのラベルでは、間隔は必ず選択範囲をラベル数で割った長さになる。
・領域ラベルでは、最後の領域の終端は必ず選択範囲の終端になる。


